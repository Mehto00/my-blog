---
title: "LAMP – julkaisu- ja kehitysalustan pystyttäminen Raspberry Pi:llä"
date: "2017-09-16"
---

\[vc\_row row\_type="row" use\_row\_as\_full\_screen\_section="no" type="full\_width" angled\_section="no" text\_align="left" background\_image\_as\_pattern="without\_pattern" css\_animation=""\]\[vc\_column\]\[vc\_column\_text css=".vc\_custom\_1505898063516{padding-top: 32px !important;padding-bottom: 32px !important;}"\]LAMP on kokoelma avoimen lähdekoodin ohjelmia, jotka yhdessä muodostavat WWW-palvelimen, jonka alla voidaan suorittaa dynaamisia websivuja[¹](https://fi.wikipedia.org/wiki/LAMP). Kirjain lyhenne LAMP muodostuu sanoista Linux, Apache, MySQL/MariaDB, PHP/Python/Pearl.

Tässä postauksessa LAMP:pi helahtaa pienen pieneen Linux-pohjaiseen tietokoneeseen nimeltä Raspberry Pi. Lisää Raspberry Pi:stä ja sen käyttöönottamisesta voit lukea aiemmasta postauksesta [Raspberry Pi:n käyttöön ottaminen](http://207.154.212.16/raspberry-pin-kayttoon-ottaminen/).\[/vc\_column\_text\]\[vc\_column\_text\]

### Tehtävä

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505489300660{padding-top: 32px !important;padding-bottom: 16px !important;}"\]

#### Asenna Apache, laita käyttäjien kotisivut (http://example.com/~mikko) toimimaan. Testaa esimerkkikotisivulla.

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505509063884{padding-bottom: 16px !important;}"\]Apachen asennus alkaa ssh-yhteyden muodostamisella Raspberry Pi:hin. Lähiverkossa RasPi vastaa tunnusella pi@raspberrypi.local ja sisään pääsee kirjaantumaan syöttämällä käyttäjätunnuksen salasanan.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505507610416{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]ssh pi@raspberrypi.local\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505567825786{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Yhteyden avauspyynnön jälkeen komentokehote pyytää koneelle kirjautuvan käyttäjätunnuksen salasanaa, jonka oikein syöttämisen jälkeen päästään käsiksi Raspberry Pi:n komentokehotteeseen. RasPiin loggaamisen jälkeen suoritin tehtävän tukeutumalla mm. Tero Karvisen blogipostaukseen [Install Apache Web Server on Ubuntu](http://terokarvinen.com/2008/install-apache-web-server-on-ubuntu-4).

Aloitetaan päivittämällä paketinhallinta ajantasalle komennolla **sudo apt-get update** ja heti perään pyydetään asentamaan apache ilman liiempiä vahvistuksia komennolla**sudo apt-get install -y apache2**.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505507769954{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]

sudo apt-get update sudo apt-get install -y apache2

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505558345308{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Apachen asennuksen onnistumisen voi työpöytäympäristössä todentaa survaamalla nettiselaimessa osoitteeseen http://localhost/. Mutta koska ssh-yhteys osoite etsitään komennolla **ifconfig | grep inet**\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505558404021{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]

ifconfig | grep inet **inet** addr:192.168.1.39 Bcast:192.168.1.255 Mask:255.255.255.0

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505560382591{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Esiin tulostuvista vaihtoehdoista 192-alkuinen kelpaa, jotenka RasPi-Apachen aloitussivu löytyy siis tässä tapauksessa osoitteesta 192.168.1.39.\[/vc\_column\_text\]\[vc\_single\_image image="16333" img\_size="large" add\_caption="yes" onclick="link\_image" qode\_css\_animation=""\]\[vc\_column\_text css=".vc\_custom\_1506852332750{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Sivu näkyy, eli Apache toimii. On siis aika siirtyä demonin ([Daemon (computing)](https://en.wikipedia.org/wiki/Daemon_(computing))) omien asetusten kimppuun. Luodaan ensiksi käyttäjälle public\_html -kansio käyttäjän kotihakemistoon, määritetään edellä mainittu hakemisto näkyville Apachessa ja lopulta otetaan uudet asetukset käyttöön käynnistämällä Apache uudelleen.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505559436985{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]

cd mkdir public\_html a2enmod userdir sudo service apache2 restart

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505559914688{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Tämän jälkeen public\_html:n pitäisi näkyä selaimessa. Mutta koska kansio on tyhjä luodaan vielä kansioon oma aloitussivu ennen kuin päästään tarkistamaan uusien asetusten toimivuus. Avataan nano-tekstieditorissa uusi tiedosto nimeltä index.html komennolla **nano index.html /home/pi/public\_html** liitetään tiedostoon geneerinen html-koodi ja tallennetaan tiedosto poistuessa painamalla näppäinyhdistelmää ctrl + x. Valitaan yes ja poistutaan enterillä.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505559977831{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]

nano index.html /home/pi/public\_html

\[/vc\_column\_text\]\[vc\_single\_image image="16343" img\_size="large" add\_caption="yes" onclick="link\_image" qode\_css\_animation="" css=".vc\_custom\_1505561674705{padding-top: 16px !important;}"\]\[vc\_column\_text css=".vc\_custom\_1505560033682{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Edellä mainittu geneerinen html-pätkä\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505561941650{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]<!DOCTYPE html> <html lang="en"> <head><meta charset="UTF-8"> <title>Raspberry Pi test site</title> </head> <body> <h1>header1</h1> <p>Hurray it works!</p> </body> </html>\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505561902346{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Viimeisenä  tarkistetaan komennolla **whoami** käyttäjätunnuksen nimi (mikä tässä tapauksessa tulostaa tietenkin pi)  ja surfataan tästä tiedosta johdettuun kotihakemisto-osoitteeseen http://192.168.1.39/~pi/. Voidaan todeta, että sivut näkyvät ja kaikki toimii.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505562432796{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]whoami\[/vc\_column\_text\]\[vc\_single\_image image="16347" img\_size="large" add\_caption="yes" onclick="link\_image" qode\_css\_animation="" css=".vc\_custom\_1505562101680{padding-top: 16px !important;}"\]\[vc\_column\_text css=".vc\_custom\_1505509343243{padding-top: 16px !important;padding-bottom: 16px !important;}"\]

#### Surffaa oman palvelimesi weppisivuja. Etsi Apachen lokista esimerkki onnistuneesta (200 ok) sivulatauksesta ja epäonnistuneesta (esim 404 not found) sivulatauksesta. Analysoi rivit.

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505500296075{padding-bottom: 16px !important;}"\]Komennolla **tail -2 /var/log/apache/access.log **lokitiedoista voidaan nähdä kaksi viimeistä access.log:iin kirjattua tapahtumaa.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505502076429{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]tail -2 /var/log/apache/access.log 192.168.1.36 - - \[15/Sep/2017:15:59:43 +0300\] "GET /~pi/ HTTP/1.1" 200 497 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10\_11\_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36" 192.168.1.36 - - \[15/Sep/2017:16:00:43 +0300\] "GET /~pi/errorlog HTTP/1.1" 404 509 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10\_11\_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36"\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505509450378{padding-top: 16px !important;}"\]Molemmista logitapahtumista on nähtävissä alussa lähiverkon ip-osoite mistä nettisivua on kutsuttu, tässä tapauksessa 192.168.1.36. Heti perään näkyville tulostuu ajankohta jona kutsu on tullut. Seuraavana tulostuu kutsuttu http-metodi (molemmissa tapauksissa GET) sekä kansiohakemisto mitä osoitteesta on haettu. HTTP/1.1 viittaa käytettyyn protokollaan ja perässä tuleva kolminumero vastauksen statuskoodiin. Ensimmäisen statuskoodi 200 (OK) kielii onnistuneesta ja toisen 404 (Not Found) epäonnistuneesta pyynnöstä. "Mozilla/5.0 (.. ..Safari/537.36" kohta sisältää "User Agent" -tiedot kutsun tehneestä koneesta ja käytetystä verkkoselaimesta.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505489322545{padding-top: 32px !important;padding-bottom: 16px !important;}"\]

#### Asenna ja kokeile PhpMyAdmin:a tai jotain muuta valmista weppiliittymää tietokantojen hallinnointiin.

\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505567416906{padding-bottom: 32px !important;}"\]Viimeisenä asentuu LAMP:n jäljelle jääneet osat MySQL ja PHP sekä phpMyAdmin. Apuna tehtävän suorittamisessa käytin PiMyLifeUp.comin erinomaista postausta [Raspberry Pi MYSQL & PHPMyAdmin Tutorial](https://pimylifeup.com/raspberry-pi-mysql-phpmyadmin/). Aloitetaan asentamalla MySQL.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505562588289{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]sudo apt-get install mysql-server\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505564415238{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Asennuksen aikana käyttäjää pyydetään määrittämään pääkäyttäjän salasana. Kuten aina salasana kannattaa valita hyvin ja painaa myös mieleen, sillä sitä tullaan käyttämään jatkossa.\[/vc\_column\_text\]\[vc\_single\_image image="16343" img\_size="large" add\_caption="yes" onclick="link\_image" qode\_css\_animation="" css=".vc\_custom\_1505561674705{padding-top: 16px !important;}"\]\[vc\_column\_text css=".vc\_custom\_1505564396405{padding-top: 16px !important;padding-bottom: 16px !important;}"\]MySQL:n asennuksen toimivuutta pääsee testaamaan avaamalla myql:n (pyytää asennuksen yhteydessä määriteltyä salasanaa) ja vaikkapa tulostamalla esiin mahdolliset käytössä olevat tietokannat. Lopetus tapahtuu **exit **\-komennolla\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505563135814{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]mysql -u root -p show databases; exit\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505564380735{padding-top: 16px !important;padding-bottom: 16px !important;}"\]Viimeisenä vuorossa asennukseen ovat PHP sekä phpMyAdmin. Ensimmäinen hoituu yksinkertaisella asennuskomennolla. Jälkimmäinen pyytää MySQL:n käyttäjältä tavoin hieman lisätietoja asennuksen yhteydessä.\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505563462279{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]sudo apt-get install php5 libapache2-mod-php5 sudo apt-get install phpmyadmin\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505566814409{padding-top: 16px !important;padding-bottom: 32px !important;}"\]Asennuksen aikana phpMyAdmin pyytää valitsemaan käytettävän webbiserverin. Valitaan Apache (välilyönti valitsee, tabilla päästään ylävalikkoon ja enterillä jatkamaan). Tämän jälkeen asennus kysyy käytettävästä tietokannasta. Koska tässä kyseisessä asennuksessa halutaan käyttää aiemmin asennettua MySQL:llää valitaan YES, minkä jälkeen asennus pyytää syöttämään ensin uuden pääkäyttäjän salasanan ja heti perään aiemmin MySQL:lle määritellyn salasanan.\[/vc\_column\_text\]\[vc\_gallery type="flexslider\_slide" interval="0" images="16350,16354,16353,16352,16351" img\_size="large" control\_nav="yes"\]\[vc\_column\_text css=".vc\_custom\_1505566513159{padding-bottom: 16px !important;}"\]Lopuksi ennen phpMyAdminin käyttöön ottoa määritellään vielä Apachen konfeihin tieto phpMyAdminin omista Apachea koskevista asetuksista muokkaamalla nanolla tiedoston **/etc/apache2/apache2.conf** loppuun lisäys **Include /etc/phpmyadmin/apache.conf**\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1505564884904{padding-top: 5px !important;padding-right: 10px !important;padding-bottom: 5px !important;padding-left: 10px !important;background-color: #dbdbdb !important;}"\]sudo nano /etc/apache2/apache2.conf\[/vc\_column\_text\]\[vc\_single\_image image="16359" img\_size="large" add\_caption="yes" onclick="link\_image" qode\_css\_animation="" css=".vc\_custom\_1505898622572{padding-top: 16px !important;}"\]\[vc\_column\_text css=".vc\_custom\_1505566779397{padding-top: 16px !important;padding-bottom: 32px !important;}"\]phpMyAdminin testaus onnistuu Apachen uudelleen käynnistyksen jälkeen surffaamalla tässä kyseissä testikeississä aiemmin mainitusta ja käytetystä ip-osoitteesta johdettuun osoitteeseen **http://192.168.1.39/phpmyadmin/ **("omalla koneella" testatessa myös **localhost/phpmyadmin **käy). Sisäänkirjautumaan pääsee tunnuksella **admin** ja syöttämällä aiemmin asennuksessa määritellyn pääkäyttäjän salasanan. Sisäänkirjaantumisen jälkeen phpMyAdminin toimivuutta voi testata vaikkapa luomalla uuden tietokannan. Graafinen käyttöliittymä on luvalla sanoen kankea, mutta toisaalta varsin yksiselitteinen eikä vaadi omaa erityistä kurssitusta toimiakseen.\[/vc\_column\_text\]\[vc\_gallery type="flexslider\_slide" interval="0" images="16365,16364,16362,16363" img\_size="large" control\_nav="yes"\]\[vc\_column\_text\]Aikaa tämän tehtävän suorittamiseen meni noin pari tuntia. Käytetty rauta tehtävässä: Raspberry Pi 3 Model B / MacBook Pro (Retina, 15-inch, Mid 2014) Käyttöjärjestelmät: Raspbian PIXEL GNU/Linux / OS X El Capitan 10.11.6\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1509026398544{padding-top: 48px !important;padding-bottom: 48px !important;}"\]_Tämä blogipostaus liittyy Haaga-Helian tietojenkäsittelyn opintoihini ja ennen kaikea [Linux palvelimet ict4tn021](http://terokarvinen.com/2017/aikataulu-linux-palvelimet-ict4tn021-4-ti-ja-5-to-alkusyksy-2017-5-op) -kurssiin, jonka rakenteesta, oppimistavoitteista ja aikataulusta voit lukea lisää [täältä](http://207.154.212.16/syksyn-opinnot-linux-palvelimet-ict4tn021/)._\[/vc\_column\_text\]\[vc\_column\_text css=".vc\_custom\_1509026440290{padding-bottom: 48px !important;}"\]_Edit 20.9.2017: Lisätty maininta Raspberry Pi:stä ja linkki aiempaan blogipostaukseen._\[/vc\_column\_text\]\[/vc\_column\]\[/vc\_row\]
